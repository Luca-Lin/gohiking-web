{"version":3,"sources":["pages/SignUp/SignUp.js"],"names":["useStyles","makeStyles","container","display","flexDirection","width","height","arrow","margin","color","title","fontFamily","fontSize","fontWeight","fontStretch","fontStyle","lineHeight","letterSpacing","form","label","errorInfo","passwordInfo","privacyInfo","submit","backgroundColor","SignUp","classes","history","useHistory","useForm","register","handleSubmit","errors","watch","password","useRef","current","responsedJSON","axios","require","React","useState","serverState","setServerState","onSubmit","data","a","console","log","post","then","response","now","Date","localStorage","setItem","token","userId","getTime","expireTime","push","catch","error","signup","msg","finally","className","onClick","name","placeholder","fullWidth","inputRef","required","email","type","minLength","validate","value","password_repeat","message","to","style","variant"],"mappings":"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","file":"static/js/41.3b36a32d.chunk.js","sourcesContent":["import Button from \"@material-ui/core/Button\";\r\nimport React, { useRef } from \"react\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  arrow: {\r\n    margin: \"40px 371px 0px 16px\",\r\n    color: \"#00d04c\",\r\n  },\r\n  title: {\r\n    width: \"98px\",\r\n    height: \"36px\",\r\n    margin: \"61px 297px 31px 16px\",\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: \"24px\",\r\n    fontWeight: \"500\",\r\n    fontStretch: \"normal\",\r\n    fontStyle: \"normal\",\r\n    lineHeight: \"1.5\",\r\n    letterSpacing: \"0.5px\",\r\n    color: \"#232323\",\r\n  },\r\n  form: {\r\n    margin: \"0 16px 48px 16px\",\r\n  },\r\n  label: {\r\n    width: \"66px\",\r\n    height: \"24px\",\r\n    margin: \"0px 0px 31px 0px\",\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"500\",\r\n    fontStretch: \"normal\",\r\n    fontStyle: \"normal\",\r\n    lineHeight: \"1.5\",\r\n    letterSpacing: \"0.5px\",\r\n    color: \"#232323\",\r\n  },\r\n  errorInfo: {\r\n    width: \"100%\",\r\n    height: \"0px\",\r\n    margin: \"16px 321px 55px 0px\",\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"normal\",\r\n    fontStretch: \"normal\",\r\n    fontStyle: \"normal\",\r\n    lineHeight: \"1.5\",\r\n    letterSpacing: \"0.5px\",\r\n    color: \"#ff3b30\",\r\n  },\r\n  passwordInfo: {\r\n    width: \"169px\",\r\n    height: \"24px\",\r\n    margin: \"16px 211px 55px 0px\",\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"normal\",\r\n    fontStretch: \"normal\",\r\n    fontStyle: \"normal\",\r\n    lineHeight: \"1.5\",\r\n    letterSpacing: \"0.5px\",\r\n    color: \"#979797\",\r\n  },\r\n  privacyInfo: {\r\n    width: \"-webkit-fill-available\",\r\n    height: \"45px\",\r\n    margin: \"75px 0px 0px\",\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"normal\",\r\n    fontStretch: \"normal\",\r\n    fontStyle: \"normal\",\r\n    lineHeight: \"1.5\",\r\n    letterSpacing: \"0.5px\",\r\n    color: \"#232323\",\r\n  },\r\n  submit: {\r\n    width: \"-webkit-fill-available\",\r\n    height: \"48px\",\r\n    margin: \"40px 0px 0px 0px\",\r\n    backgroundColor: \"#00d04c\",\r\n    color: \"#ffffff\",\r\n  },\r\n});\r\n\r\nconst SignUp = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { register, handleSubmit, errors, watch } = useForm();\r\n  const password = useRef({});\r\n  password.current = watch(\"password\", \"\");\r\n  const axios = require(\"axios\");\r\n  const [serverState, setServerState] = React.useState();\r\n  const handleServerResponse = (signup, msg) => {\r\n    setServerState({\r\n      signup,\r\n      msg,\r\n    });\r\n  };\r\n  let responsedJSON;\r\n\r\n  // API POST\r\n  const onSubmit = async (data) => {\r\n    console.log(data);\r\n    await axios\r\n      .post(\"https://gohikingreboot.herokuapp.com/api/register\", data)\r\n      .then(function(response) {\r\n        const now = new Date();\r\n        console.log(\"correct\");\r\n        responsedJSON = response.data;\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"userId\", response.data.userId);\r\n        localStorage.setItem(\r\n          \"expireTime\",\r\n          now.getTime() + response.data.expireTime\r\n        );\r\n        history.push(\"/register0_1\");\r\n      })\r\n      .catch(function(error) {\r\n        console.log(\"error\");\r\n        responsedJSON = error.response.data;\r\n        handleServerResponse(false, responsedJSON.error);\r\n      })\r\n      .finally(function() {\r\n        console.log(responsedJSON);\r\n      });\r\n  };\r\n\r\n  function backhandleClick() {\r\n    history.push(\"/signin\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <ArrowBackIcon className={classes.arrow} onClick={backhandleClick} />\r\n      <div className={classes.title}>註冊帳號</div>\r\n      <form className={classes.form} onSubmit={handleSubmit(onSubmit)}>\r\n        <label className={classes.label}>電子信箱</label>\r\n        <Input\r\n          name=\"email\"\r\n          placeholder=\"請輸入電子信箱\"\r\n          fullWidth\r\n          inputRef={register({ required: true })}\r\n        />\r\n        <div className={classes.errorInfo}>\r\n          {errors.email && \"請輸入正確Email\"}\r\n        </div>\r\n        <label className={classes.label}>密碼</label>\r\n        <br />\r\n        <Input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"請輸入密碼\"\r\n          fullWidth\r\n          inputRef={register({\r\n            required: true,\r\n            minLength: 8,\r\n          })}\r\n        />\r\n        <div className={classes.errorInfo}>\r\n          {errors.password && \"密碼必須包含8個字元以上\"}\r\n        </div>\r\n        <label className={classes.label}>確認密碼</label>\r\n        <br />\r\n        <Input\r\n          placeholder=\"請重新輸入密碼\"\r\n          name=\"password_repeat\"\r\n          type=\"password\"\r\n          fullWidth\r\n          inputRef={register({\r\n            validate: (value) => value === password.current || \"密碼不一致！\",\r\n          })}\r\n        />\r\n        <div className={classes.errorInfo}>\r\n          {errors.password_repeat && <p>{errors.password_repeat.message}</p>}\r\n          {serverState && (\r\n            <div className={classes.errorInfo}>{serverState.msg}</div>\r\n          )}\r\n        </div>\r\n        <div className={classes.privacyInfo}>\r\n          使用這個應用程式前，請先詳閱「Go Hiking」的 《\r\n          <Link to=\"/privacyPolicy\" style={{ color: \"#007aff\" }}>\r\n            隱私權政策\r\n          </Link>\r\n          》及《\r\n          <Link to=\"/aboutUs\" style={{ color: \"#007aff\" }}>\r\n            服務條款\r\n          </Link>\r\n          》\r\n        </div>\r\n\r\n        <Button\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          className={classes.submit}\r\n        >\r\n          同意並註冊\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n"],"sourceRoot":""}