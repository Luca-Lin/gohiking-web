{"version":3,"sources":["pages/HikingFrontend/Login1.js"],"names":["useStyles","makeStyles","theme","form","width","submit","height","fontSize","margin","backgroundColor","color","borderRadius","container","padding","MaterialIconsBlackArrowback","InputBackground","borderColor","Title","fontFamily","fontweight","lineheight","letterspacing","Text","fontWeight","fontStretch","fontStyle","lineHeight","letterSpacing","ErrorInfo","ForgotInfo","ModifyTextFieldColor","SignIn","responsedJSON","classes","useForm","register","handleSubmit","errors","axios","require","React","useState","serverState","setServerState","goNext","useHistory","goHome","back","history","previous_pathname","localStorage","getItem","onSubmit","data","a","console","log","post","then","response","setItem","token","userId","now","Date","getTime","expireTime","push","pathname","catch","error","login","msg","finally","className","onClick","textalign","inputRef","required","id","placeholder","name","email","minLength","type","password","justify","variant"],"mappings":"2SAWMA,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,MAAO,QAETC,OAAQ,CACND,MAAO,yBACPE,OAAQ,OACRC,SAAU,OACVC,OAAQ,WACRC,gBAAiB,UACjBC,MAAO,UACPC,aAAc,GAEhBC,UAAW,CACTR,MAAO,yBACPE,OAAQ,QACRO,QAAS,kBACTJ,gBAAiB,WAInBK,4BAA6B,CAC3BV,MAAO,KACPE,OAAQ,KACRI,MAAO,UACPF,OAAQ,kBAEVO,gBAAiB,CACfX,MAAO,yBACPE,OAAQ,KACRE,OAAQ,UACRK,QAAS,UACTG,YAAa,WAEfC,MAAO,CACLb,MAAO,KACPE,OAAQ,KACRE,OAAQ,iBACRU,WAAY,gBACZX,SAAU,OACVY,WAAY,IACZC,WAAY,IACZC,cAAe,QACfX,MAAO,WAETY,KAAM,CACJlB,MAAO,OACPE,OAAQ,OACRE,OAAQ,gBACRD,SAAU,OACVgB,WAAY,MACZC,YAAa,SACbC,UAAW,SACXC,WAAY,MACZC,cAAe,QACfjB,MAAO,WAETkB,UAAW,CACTxB,MAAO,OACPE,OAAQ,OACRE,OAAQ,gBACRU,WAAY,gBACZX,SAAU,OACVgB,WAAY,SACZC,YAAa,SACbC,UAAW,SACXC,WAAY,MACZC,cAAe,QACfjB,MAAO,WAETmB,WAAY,CACVzB,MAAO,QACPE,OAAQ,OACRY,WAAY,gBACZV,OAAQ,qBACRD,SAAU,OACVgB,WAAY,MACZC,YAAa,SACbC,UAAW,SACXC,WAAY,MACZC,cAAe,QACfjB,MAAO,WAEToB,qBAAsB,CAEpBvB,SAAU,OACVG,MAAO,UACPM,YAAa,eAIF,SAASe,IACtB,IAWIC,EAXEC,EAAUjC,IAChB,EAA2CkC,cAAnCC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,aAAcC,EAAhC,EAAgCA,OAC1BC,EAAQC,EAAQ,KACtB,EAAsCC,IAAMC,WAA5C,mBAAOC,EAAP,KAAoBC,EAApB,KAUIC,EAASC,cACTC,EAASD,cACTE,EAAOF,cACPG,EAAUH,cAWd,IAAMI,EAAoBC,aAAaC,QAAQ,qBAGzCC,EAAQ,uCAAG,WAAOC,GAAP,SAAAC,EAAA,6DACfC,QAAQC,IAAIH,GADG,SAETf,EACHmB,KAAK,wCAAyCJ,GAC9CK,MAAK,SAASC,GACbJ,QAAQC,IAAI,WAEZxB,EAAgB2B,EAASN,KACzBH,aAAaU,QAAQ,QAASD,EAASN,KAAKQ,OAC5CX,aAAaU,QAAQ,SAAUD,EAASN,KAAKS,QAC7C,IAAMC,EAAM,IAAIC,KAChBd,aAAaU,QACX,aACAG,EAAIE,UAAYN,EAASN,KAAKa,YAEP,MAArBjB,EAxBRH,EAAOqB,KAAK,SA2BNnB,EAAQmB,KAAK,CAAEC,SAAUnB,OAG5BoB,OAAM,SAASC,GA/CS,IAACC,EAAOC,EAgD/BjB,QAAQC,IAAI,SACZxB,EAAgBsC,EAAMX,SAASN,KAjDPkB,GAkDH,EAlDUC,EAkDHxC,EAAcsC,MAjD9C3B,EAAe,CACb4B,QACAC,WAiDCC,SAAQ,WACPlB,QAAQC,IAAIxB,MA3BD,2CAAH,sDA+Bd,OACE,sBAAK0C,UAAWzC,EAAQrB,UAAxB,UACE,cAAC,IAAD,CACE8D,UAAWzC,EAAQnB,4BACnB6D,QA1CN,WACE5B,EAAKoB,KAAK,cA2CR,cAAC,IAAD,CAAYO,UAAWzC,EAAQhB,MAAO2D,UAAU,OAAhD,0BAGA,uBAAMF,UAAWzC,EAAQ9B,KAAMiD,SAAUhB,EAAagB,GAAtD,UACE,cAAC,IAAD,CAAYsB,UAAWzC,EAAQX,KAAMsD,UAAU,OAA/C,sCAGA,cAAC,IAAD,CACEC,SAAU1C,EAAS,CAAE2C,UAAU,IAC/BJ,UAAWzC,EAAQlB,gBACnBgE,GAAG,QACHC,YAAY,yDACZC,KAAK,UAEP,cAAC,IAAD,CAAYP,UAAWzC,EAAQL,UAAWgD,UAAU,OAApD,SACGvC,EAAO6C,OAAS,wCAEnB,cAAC,IAAD,CAAYR,UAAWzC,EAAQX,KAAMsD,UAAU,OAA/C,0BAGA,cAAC,IAAD,CACEC,SAAU1C,EAAS,CAAE2C,UAAU,EAAMK,UAAW,IAChDT,UAAWzC,EAAQlB,gBACnBgE,GAAG,WACHC,YAAY,6CACZC,KAAK,WACLG,KAAK,aAEP,eAAC,IAAD,CAAYV,UAAWzC,EAAQL,UAA/B,UACGS,EAAOgD,UAAY,sEACnB3C,GACC,cAAC,IAAD,CAAYgC,UAAWzC,EAAQL,UAA/B,SACGc,EAAY8B,SAInB,cAAC,IAAD,CAAM5D,WAAS,EAAC0E,QAAQ,WAAxB,SACE,cAAC,IAAD,CAAMX,QAvFd,WACE/B,EAAOuB,KAAK,YAsFN,SACE,cAAC,IAAD,CAAYO,UAAWzC,EAAQJ,WAA/B,2CAGJ,cAAC,IAAD,CAAQuD,KAAK,SAASG,QAAQ,YAAYb,UAAWzC,EAAQ5B,OAA7D","file":"static/js/33.0fc72d7f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n  },\r\n  submit: {\r\n    width: \"-webkit-fill-available\",\r\n    height: \"48px\",\r\n    fontSize: \"16px\",\r\n    margin: \"56px 0 0\",\r\n    backgroundColor: \"#00d04c\",\r\n    color: \"#ffffff\",\r\n    borderRadius: 4,\r\n  },\r\n  container: {\r\n    width: \"-webkit-fill-available\",\r\n    height: \"768px\",\r\n    padding: \"40px 16px 213px\",\r\n    backgroundColor: \"#ffffff\",\r\n\r\n    //backgroundColor:'#66CBBA'\r\n  },\r\n  MaterialIconsBlackArrowback: {\r\n    width: \"24\",\r\n    height: \"24\",\r\n    color: \"#00d04c\",\r\n    margin: \"0 297px 61px 0\",\r\n  },\r\n  InputBackground: {\r\n    width: \"-webkit-fill-available\",\r\n    height: \"40\",\r\n    margin: \"1px 0 0\",\r\n    padding: \"9px 0 0\",\r\n    borderColor: \"#232323\",\r\n  },\r\n  Title: {\r\n    width: \"98\",\r\n    height: \"36\",\r\n    margin: \"0 281px 31px 0\",\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: \"24px\",\r\n    fontweight: 500,\r\n    lineheight: 1.5,\r\n    letterspacing: \"0.5px\",\r\n    color: \"#232323\",\r\n  },\r\n  Text: {\r\n    width: \"66px\",\r\n    height: \"24px\",\r\n    margin: \"0 313px 1px 0\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"500\",\r\n    fontStretch: \"normal\",\r\n    fontStyle: \"normal\",\r\n    lineHeight: \"1.5\",\r\n    letterSpacing: \"0.5px\",\r\n    color: \"#232323\",\r\n  },\r\n  ErrorInfo: {\r\n    width: \"100%\",\r\n    height: \"21px\",\r\n    margin: \"16px 0 32px 0\",\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"normal\",\r\n    fontStretch: \"normal\",\r\n    fontStyle: \"normal\",\r\n    lineHeight: \"1.5\",\r\n    letterSpacing: \"0.5px\",\r\n    color: \"#ff3b30\",\r\n  },\r\n  ForgotInfo: {\r\n    width: \"100px\",\r\n    height: \"21px\",\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    margin: \"-30px 0 56px 263px\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n    fontStretch: \"normal\",\r\n    fontStyle: \"normal\",\r\n    lineHeight: \"1.5\",\r\n    letterSpacing: \"0.5px\",\r\n    color: \"#232323\",\r\n  },\r\n  ModifyTextFieldColor: {\r\n    // Theme Color, or use css color in quote\r\n    fontSize: \"14px\",\r\n    color: \"#979797\",\r\n    borderColor: \"#979797\",\r\n  },\r\n}));\r\n\r\nexport default function SignIn() {\r\n  const classes = useStyles();\r\n  const { register, handleSubmit, errors } = useForm();\r\n  const axios = require(\"axios\");\r\n  const [serverState, setServerState] = React.useState();\r\n  const handleServerResponse = (login, msg) => {\r\n    setServerState({\r\n      login,\r\n      msg,\r\n    });\r\n  };\r\n  //JSON\r\n  let responsedJSON;\r\n  //Go to ? Page\r\n  let goNext = useHistory();\r\n  let goHome = useHistory();\r\n  let back = useHistory();\r\n  let history = useHistory();\r\n  function GoToLogin1_2() {\r\n    goNext.push(\"/login2\");\r\n  }\r\n  function GoHome() {\r\n    goHome.push(\"/home\");\r\n  }\r\n  function backhandleClick() {\r\n    back.push(\"/signin\");\r\n  }\r\n\r\n  const previous_pathname = localStorage.getItem(\"previous_pathname\");\r\n\r\n  // API POST\r\n  const onSubmit = async (data) => {\r\n    console.log(data);\r\n    await axios\r\n      .post(\"https://gohikingreboot.herokuapp.com/\", data)\r\n      .then(function(response) {\r\n        console.log(\"correct\");\r\n\r\n        responsedJSON = response.data;\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"userId\", response.data.userId);\r\n        const now = new Date();\r\n        localStorage.setItem(\r\n          \"expireTime\",\r\n          now.getTime() + response.data.expireTime\r\n        );\r\n        if (previous_pathname == null) {\r\n          GoHome();\r\n        } else {\r\n          history.push({ pathname: previous_pathname });\r\n        }\r\n      })\r\n      .catch(function(error) {\r\n        console.log(\"error\");\r\n        responsedJSON = error.response.data;\r\n        handleServerResponse(false, responsedJSON.error);\r\n      })\r\n      .finally(function() {\r\n        console.log(responsedJSON);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <ArrowBackIcon\r\n        className={classes.MaterialIconsBlackArrowback}\r\n        onClick={backhandleClick}\r\n      />\r\n      <Typography className={classes.Title} textalign=\"left\">\r\n        登入\r\n      </Typography>\r\n      <form className={classes.form} onSubmit={handleSubmit(onSubmit)}>\r\n        <Typography className={classes.Text} textalign=\"left\">\r\n          電子信箱\r\n        </Typography>\r\n        <TextField\r\n          inputRef={register({ required: true })}\r\n          className={classes.InputBackground}\r\n          id=\"email\"\r\n          placeholder=\"請輸入你的電子信箱\"\r\n          name=\"email\"\r\n        />\r\n        <Typography className={classes.ErrorInfo} textalign=\"left\">\r\n          {errors.email && \"請輸入正確Email\"}\r\n        </Typography>\r\n        <Typography className={classes.Text} textalign=\"left\">\r\n          密碼\r\n        </Typography>\r\n        <TextField\r\n          inputRef={register({ required: true, minLength: 8 })}\r\n          className={classes.InputBackground}\r\n          id=\"password\"\r\n          placeholder=\"請輸入你的密碼\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n        />\r\n        <Typography className={classes.ErrorInfo}>\r\n          {errors.password && \"密碼必須包含8個字元以上\"}\r\n          {serverState && (\r\n            <Typography className={classes.ErrorInfo}>\r\n              {serverState.msg}\r\n            </Typography>\r\n          )}\r\n        </Typography>\r\n        <Grid container justify=\"flex-end\">\r\n          <Link onClick={GoToLogin1_2}>\r\n            <Typography className={classes.ForgotInfo}>忘記密碼?</Typography>\r\n          </Link>\r\n        </Grid>\r\n        <Button type=\"submit\" variant=\"contained\" className={classes.submit}>\r\n          登入\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}