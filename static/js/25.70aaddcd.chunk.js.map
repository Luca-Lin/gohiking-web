{"version":3,"sources":["components/Comment/Comment.js","pages/TrailComment/TrailComment.js","../node_modules/@material-ui/icons/ThumbUp.js","../node_modules/@material-ui/icons/ThumbDown.js"],"names":["useStyles","makeStyles","theme","root","fontFamily","flexGrow","width","tangle","height","backgroundColor","comment","fontWeight","fontSize","paddingLeft","paddingRight","commentName","paddingTop","paddingBottom","rating","commentButton","position","right","textAlign","thumbup","icon","color","thumbupText","marginLeft","gridList","magetty","padding","time","number","lightTheme","createTheme","palette","type","primary","main","Commit","props","history","useHistory","classes","data","useState","like","setLike","dislike","setDisLike","likestatus","likeCheck","setLikeCheck","dislikestatus","dislikeCheck","setDislikeCheck","ThemeProvider","Grid","className","user","name","Rating","value","star","readOnly","Button","variant","difficulty","content","item","xs","sm","IconButton","Checkbox","checked","onChange","id","uid","localStorage","getItem","push","pathname","prev","demoapi","post","then","res","console","log","status","handleChange","checkedIcon","style","Typography","alert","handleChange1","comments_images","map","img","src","s3_url","date","Math","round","duration","expireTime","Date","getTime","removeItem","checkExpireTime","BorderLinearProgress","withStyles","borderRadius","colorPrimary","grey","bar","LinearProgress","fraction","text","progress","marginBottom","TrailCommit","stars","setStars","setComment","comments","setComments","trail_id","location","state","commentApi","a","get","useEffect","x","avgStar","Number","parseFloat","toFixed","ceil","AppBar","Toolbar","edge","menuButton","onClick","title","precision","size","totalPeople","List","component","ListItem","five","four","three","two","one","trail","goBack","top","left","transform","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","default","React","_default","createElement","d"],"mappings":"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","file":"static/js/25.70aaddcd.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  makeStyles,\r\n  ThemeProvider,\r\n  createTheme ,\r\n} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Rating from \"@material-ui/lab/Rating\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport ThumbUpIcon from \"@material-ui/icons/ThumbUp\";\r\nimport ThumbDownIcon from \"@material-ui/icons/ThumbDown\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Checkbox } from \"@material-ui/core\";\r\nimport demoapi from \"axios/api\";\r\nimport { useHistory } from \"react-router\";\r\n//import { set } from \"date-fns\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n  },\r\n  tangle: {\r\n    width: \"100%\",\r\n    height: \"8px\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\r\n  },\r\n\r\n  comment: {\r\n    fontWeight: 500,\r\n    fontSize: \"14px\",\r\n    paddingLeft: \"3%\",\r\n    paddingRight: \"2%\",\r\n  },\r\n  commentName: {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"14px\",\r\n    paddingTop: \"4%\",\r\n    paddingBottom: \"4%\",\r\n  },\r\n  rating: {\r\n    paddingBottom: \"5%\",\r\n  },\r\n  commentButton: {\r\n    position: \"absolute\",\r\n    right: 10,\r\n    paddingBottom: 3,\r\n    textAlign: \"center\",\r\n    fontSize: \"12px\",\r\n    backgroundColor:\"rgba(0, 208, 76, 0.1)\",\r\n  },\r\n  thumbup: {\r\n    paddingRight: \"10%\",\r\n  },\r\n  icon: {\r\n    color: \"#3c5754\",\r\n  },\r\n  thumbupText: {\r\n    fontSize: \"14px\",\r\n    marginLeft: 5,\r\n  },\r\n  gridList: {},\r\n  magetty: {\r\n    padding: \"2%\",\r\n    width: \"88px\",\r\n    height: \"88px\",\r\n  },\r\n  time: {\r\n    color: \"#979797\",\r\n    fontSize: \"12px\",\r\n  },\r\n  number: {\r\n    paddingLeft: \"30%\",\r\n  },\r\n}));\r\n\r\nconst lightTheme = createTheme ({\r\n  palette: {\r\n    type: \"light\",\r\n    primary: {\r\n      main: \"#00d04c\",\r\n    },\r\n  },\r\n});\r\n\r\nexport default function Commit(props) {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const comment = props.data;\r\n  const [like, setLike] = useState(comment.like);\r\n  const [dislike, setDisLike] = useState(comment.dislike);\r\n  const [likeCheck, setLikeCheck] = useState(comment.likestatus);\r\n  const [dislikeCheck, setDislikeCheck] = useState(comment.dislikestatus);\r\n\r\n  const handleChange = (id) => {\r\n    //觸發  likeCheck 喜歡 post status +1\r\n\r\n    let uid = 0;\r\n    if (localStorage.getItem(\"userId\")) {\r\n      uid = localStorage.getItem(\"userId\");\r\n    } else {\r\n      history.push({ pathname: \"/signin\" });\r\n    }\r\n    setLikeCheck((prev) => !prev);\r\n\r\n    if (likeCheck) {\r\n      setLike(like - 1);\r\n    } else {\r\n      setLike(like + 1);\r\n    }\r\n   \r\n    if (dislikeCheck) {\r\n      setDislikeCheck(false);\r\n      setDisLike(dislike - 1);\r\n    } //如果 dislikeCheck 不喜歡 為true 改為false\r\n    demoapi\r\n      .post(\r\n        \"/api/likeComment/?user_id=\" + uid + \"&comment_id=\" + id + \"&status=\" + 1\r\n      )\r\n      .then((res) => {\r\n        console.log(res.status);\r\n      });\r\n  };\r\n  const handleChange1 = (id) => {\r\n    //觸發  didlikeCheck 不喜歡poststatus -1\r\n    let uid = 0;\r\n    if (localStorage.getItem(\"userId\")){\r\n      uid = localStorage.getItem(\"userId\");\r\n    } else {\r\n      alert(\"請先登入\");\r\n      history.push({ pathname: \"/signin\" });\r\n    }\r\n    setDislikeCheck((prev) => !prev);\r\n    if (dislikeCheck) {\r\n      setDisLike(dislike - 1);\r\n    }else{\r\n      setDisLike(dislike + 1);\r\n    }\r\n    if (likeCheck) {\r\n      setLikeCheck(false);\r\n      setLike(like - 1);\r\n    } //如果 likeCheck 喜歡 為true 改為false\r\n    demoapi\r\n      .post(\r\n        \"/api/likeComment/?user_id=\" + uid + \"&comment_id=\" + id + \"&status=\" + -1\r\n      )\r\n      .then((res) => {\r\n        console.log(res.status);\r\n      });\r\n  };\r\n  return (\r\n    <ThemeProvider theme={lightTheme}>\r\n      <Grid className={classes.comment}>\r\n        <Grid className={classes.commentName}>{comment.user.name}</Grid>\r\n        <Rating\r\n         \r\n          className={classes.rating}\r\n          value={comment.star}\r\n          readOnly\r\n        />\r\n        <Button\r\n          className={classes.commentButton}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n        >\r\n          {comment.difficulty == 1 && \"疑?有山嗎?\"}\r\n          {comment.difficulty == 2 && \"覺得輕鬆\"}\r\n          {comment.difficulty == 3 && \"覺得還好\"}\r\n          {comment.difficulty == 4 && \"有點兒累\"}\r\n          {comment.difficulty == 5 && \"根本自虐吧\"}\r\n        </Button>\r\n\r\n        <Grid>{comment.content}</Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <IconButton className={classes.thumbup}>\r\n            <Checkbox\r\n              checked={likeCheck}\r\n              onChange={() => {\r\n                handleChange(comment.id);\r\n              }}\r\n              icon={<ThumbUpIcon />}\r\n              checkedIcon={<ThumbUpIcon style={{ color: \"#3c5754\" }} />}\r\n            />\r\n\r\n            <Typography className={classes.thumbupText}>{like}</Typography>\r\n          </IconButton>\r\n\r\n          <IconButton className={classes.thumbup}>\r\n            <Checkbox\r\n              checked={dislikeCheck}\r\n              onChange={() => {\r\n                handleChange1(comment.id);\r\n              }}\r\n              icon={<ThumbDownIcon />}\r\n              checkedIcon={<ThumbDownIcon style={{ color: \"#3c5754\" }} />}\r\n            />\r\n\r\n            <Typography className={classes.thumbupText}>{dislike}</Typography>\r\n          </IconButton>\r\n        </Grid>\r\n\r\n        <Grid className={classes.gridList}>\r\n          {comment.comments_images.map((img) => (\r\n            <img src={img.s3_url} className={classes.magetty} />\r\n          ))}\r\n        </Grid>\r\n        <Typography className={classes.time}>\r\n          {comment.date}. 來回時間: {Math.round(comment.duration / 60)}h{\" \"}\r\n          {comment.duration % 60}m\r\n        </Typography>\r\n        <hr />\r\n      </Grid>\r\n    </ThemeProvider>\r\n  );\r\n}\r\nfunction checkExpireTime() {\r\n  const expireTime = localStorage.getItem(\"expireTime\");\r\n  console.log(expireTime);\r\n  if (!expireTime) {\r\n    return null;\r\n  }\r\n  const now = new Date();\r\n  if (now.getTime() > expireTime) {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"expireTime\");\r\n    localStorage.removeItem(\"userId\");\r\n    console.log(\"remove\");\r\n    return null;\r\n  }\r\n  console.log(\"token\");\r\n  return localStorage.getItem(\"token\");\r\n}\r\ncheckExpireTime();\r\n","import Comment from \"../../components/Comment/Comment\"; //引入討論頁面\r\nimport React, { useState, useEffect, Fragment } from \"react\";\r\nimport {\r\n  makeStyles,\r\n  ThemeProvider,\r\n  withStyles,\r\n  createTheme ,\r\n} from \"@material-ui/core/styles\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport Rating from \"@material-ui/lab/Rating\";\r\nimport { Link, useHistory  } from \"react-router-dom\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport demoapi from \"../../axios/api\";\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 10,\r\n    borderRadius: 5,\r\n    width: \"60%\",\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor:\r\n      theme.palette.grey[theme.palette.type === \"light\" ? 200 : 700],\r\n  },\r\n  bar: {\r\n    borderRadius: 5,\r\n    backgroundColor: \"#fec15d\",\r\n  },\r\n}))(LinearProgress);\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n  },\r\n  tangle: {\r\n    width: \"100%\",\r\n    height: \"8px\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\r\n  },\r\n  rating: {\r\n    position: \"absolute\",\r\n    right: \"3%\",\r\n  },\r\n  number: {\r\n    fontWeight: \"bold\",\r\n    fontFamily: \"Roboto\",\r\n    fontSize: \"14px\",\r\n  },\r\n  fraction: {\r\n    fontSize: \"64px\",\r\n  },\r\n  text: {\r\n    fontFamily: \"Roboto\",\r\n    textAlign: \"center\",\r\n    color: \"rgba(0, 0, 0, 0.38)\",\r\n  },\r\n\r\n  gridList: {},\r\n  magetty: {\r\n    padding: \"2%\",\r\n    width: \"88px\",\r\n    height: \"88px\",\r\n  },\r\n  time: {\r\n    fontSize: \"12px\",\r\n  },\r\n  progress: {\r\n    marginLeft: \"4%\",\r\n    marginBottom: \"1%\",\r\n  },\r\n}));\r\n\r\nconst lightTheme = createTheme ({\r\n  palette: {\r\n    type: \"light\",\r\n    primary: {\r\n      main: \"#3c5754\",\r\n    },\r\n  },\r\n});\r\n\r\nexport default function TrailCommit(props) {\r\n  const classes = useStyles();\r\n  const [stars, setStars] = useState([]);\r\n  const [comment, setComment] = useState([]);\r\n  const history = useHistory(); \r\n  const [comments, setComments] = useState([]);\r\n  const trail_id = props.location.state.trail_id;\r\n  console.log(trail_id);\r\n  const uid = localStorage.getItem(\"userId\");\r\n  \r\n  const commentApi = async (id) => {\r\n    await demoapi.get(\"/api/comment/\" + trail_id + \"?uuid=\" + uid).then((res) => {\r\n      setComment(res.data); //步道總討論 api\r\n      setStars(res.data.stars); //星星等級api\r\n      setComments(res.data.comments); //步道討論 api\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    commentApi(uid);\r\n  }, [uid]);\r\n  function financial(x) {\r\n    return Number.parseFloat(x).toFixed(1); // 判斷總成績 小數點後一位\r\n  }\r\n  var avgStar = comment.avgStar;\r\n  avgStar = financial(avgStar);\r\n\r\n  let mathStar = 0;\r\n  mathStar = Math.ceil(avgStar);\r\nif(comment.avgStar) {return (\r\n  \r\n    <>\r\n      <div className={classes.root}>\r\n        <ThemeProvider theme={lightTheme}>\r\n          <AppBar position=\"static\">\r\n            <Toolbar>\r\n         \r\n                <IconButton\r\n                  edge=\"start\"\r\n                  className={classes.menuButton}\r\n                  color=\"inherit\"\r\n                  aria-label=\"menu\"\r\n                  onClick={() => {history.push({\r\n                    pathname:'/pathway',\r\n                    state: {trail_id: trail_id},\r\n                    })}}\r\n                >\r\n                  <ArrowBackIcon style={{ color: \"white\" }} />\r\n                </IconButton>\r\n            \r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                步道評論與討論\r\n              </Typography>\r\n            </Toolbar>\r\n          </AppBar>\r\n        </ThemeProvider>\r\n\r\n        <Grid className={classes.tangle} />\r\n\r\n        <Grid className={classes.progress}>\r\n          <Grid className={classes.rating}>\r\n            <Grid className={classes.fraction}>{avgStar} </Grid>\r\n            <Rating name=\"size-small\"  precision = {0.1}  value={avgStar}  readOnly size=\"small\" />\r\n            <Grid className={classes.text}> ({comment.totalPeople})</Grid>\r\n          </Grid>\r\n          <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n            <ListItem>\r\n              <ThemeProvider className={classes.number}>5 </ThemeProvider>\r\n              <BorderLinearProgress\r\n                className={classes.progress}\r\n                variant=\"determinate\"\r\n                value={(stars.five * 100) / comment.totalPeople}\r\n              />\r\n            </ListItem>\r\n\r\n            <ListItem>\r\n              <ThemeProvider className={classes.number}>4</ThemeProvider>\r\n              <BorderLinearProgress\r\n                variant=\"determinate\"\r\n                value={(stars.four * 100) / comment.totalPeople}\r\n                className={classes.progress}\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <ThemeProvider className={classes.number}> 3</ThemeProvider>\r\n              <BorderLinearProgress\r\n                variant=\"determinate\"\r\n                value={(stars.three * 100) / comment.totalPeople}\r\n                className={classes.progress}\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <ThemeProvider className={classes.number}>2</ThemeProvider>\r\n              <BorderLinearProgress\r\n                variant=\"determinate\"\r\n                value={(stars.two * 100) / comment.totalPeople}\r\n                className={classes.progress}\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <ThemeProvider className={classes.number}>1</ThemeProvider>\r\n              <BorderLinearProgress\r\n                variant=\"determinate\"\r\n                value={(stars.one * 100) / comment.totalPeople}\r\n                className={classes.progress}\r\n              />\r\n            </ListItem>\r\n          </List>\r\n        </Grid>\r\n        <Grid className={classes.tangle} />\r\n\r\n        {comments.map((trail) => (\r\n          <Comment data={trail} />\r\n        ))}\r\n      </div>\r\n    </>\r\n  );}else{\r\n    return(\r\n      <>\r\n      <div className={classes.root}>\r\n        <ThemeProvider theme={lightTheme}>\r\n          <AppBar position=\"static\">\r\n            <Toolbar>\r\n         \r\n                <IconButton\r\n                  edge=\"start\"\r\n                  className={classes.menuButton}\r\n                  color=\"inherit\"\r\n                  aria-label=\"menu\"\r\n                  onClick={() => {history.goBack({\r\n                    \r\n                    state: {trail_id: trail_id},\r\n                    })}}\r\n                >\r\n                  <ArrowBackIcon style={{ color: \"white\" }} />\r\n                </IconButton>\r\n            \r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                步道評論與討論\r\n              </Typography>\r\n            </Toolbar>\r\n          </AppBar>\r\n        </ThemeProvider>\r\n        <div  style={{  position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%,-50%)\"}}>\r\n        <h1>查無此評論</h1>\r\n        </div>\r\n         \r\n      </div>\r\n    </>\r\n    );\r\n  }\r\n}\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z\"\n}), 'ThumbUp');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z\"\n}), 'ThumbDown');\n\nexports.default = _default;"],"sourceRoot":""}