(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[37],{1013:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return w}));var n=o(39),c=o(12),a=o(13),r=o(15),i=o(24),l=o.n(i),s=o(0),u=o(197),d=o(114),f=o(736),g=o(86),p=o(354),h=o(346),j=o(26),x=o(163),b=o.n(x),O=o(3),m=Object(u.a)((function(e){return{container:{display:"flex",flexDirection:"column",height:"768px",width:"100%"},root:{"& > *":{margin:e.spacing(1),width:"25ch"},display:"flex",justifyContent:"space-around",padding:"0 73px 0 74px"},textField:{width:"54px",height:"40px",margin:"48px 0 0",padding:"9px 0 0"}}})),v=Object(d.b)({palette:{primary:{light:"#00d04c",main:"#00d04c",dark:"#00d04c",contrastText:"#00d04c"}}}),y=b.a.create({baseURL:"https://staging-server.gohiking.app/"});function w(e){var t=m(),o=Object(s.useState)({code_one:"",code_two:"",code_three:"",code_four:"",submitted:!1}),i=Object(r.a)(o,2),u=i[0],d=i[1],x=Object(s.useRef)(null),b=Object(s.useRef)(null),w=Object(s.useRef)(null),C=Object(s.useRef)(null),S=Object(s.useState)(-1),k=Object(r.a)(S,2),_=k[0],R=k[1],N=Object(s.useState)(-1),W=Object(r.a)(N,2),I=W[0],F=W[1],z=Object(s.useState)(-1),D=Object(r.a)(z,2),J=D[0],K=D[1],E=Object(s.useState)(-1),H=Object(r.a)(E,2),L=H[0],P=H[1],T=Object(s.useState)(""),U=Object(r.a)(T,2),V=(U[0],U[1],{email:localStorage.getItem("email")});console.log(V);var q=function(e){var t=e.target,o=t.id,n=t.value;n.length<2&&(d((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(c.a)({},o,n))})),"code_one"===o&&n.length>0&&(R(_=n),console.log(_),b.current.focus()),"code_two"===o&&n.length>0&&(F(I=n),console.log(I),w.current.focus()),"code_three"===o&&n.length>0&&(K(J=n),console.log(J),C.current.focus()),"code_four"===o&&n.length>0&&(P(L=n),console.log(L)))},A=function(e){8===e.keyCode&&"code_two"===e.target.id&&(""!==e.target.value?b.current.focus():x.current.focus()),8===e.keyCode&&"code_three"===e.target.id&&(""!==e.target.value?w.current.focus():b.current.focus()),8===e.keyCode&&"code_four"===e.target.id&&(""===e.target.value?w.current.focus():C.current.focus())},B=Object(s.useState)({email:null,verificationCode0:null,verificationCode1:null,verificationCode2:null,verificationCode3:null}),G=Object(r.a)(B,2),M=G[0],Q=G[1],X=function(){var e=Object(n.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("code is like this before: "+M),Q({email:localStorage.getItem("email"),verificationCode0:_,verificationCode1:I,verificationCode2:J,verificationCode3:L}),console.log("code is like this after: "+M);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=Object(s.useRef)(!0);Object(s.useLayoutEffect)((function(){Y.current?Y.current=!1:(console.log("code is like this Effect: "),le())}),[M]);var Z=Object(j.k)(),$=Object(s.useState)(""),ee=Object(r.a)($,2),te=ee[0],oe=ee[1],ne=Object(s.useState)(""),ce=Object(r.a)(ne,2),ae=ce[0],re=ce[1],ie="",le=function(){var e=Object(n.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(M),e.next=3,y.post("api/password/confirm",M).then((function(e){console.log("\u9a57\u8b49\u78bc\u6b63\u78ba"),console.log(e.data),localStorage.setItem("token",JSON.stringify(e.data)),console.log(JSON.parse(localStorage.getItem("token"))),console.log("\u5f97\u5230token!"),console.log("ready to go"),Z.push("/ResetPassword")})).catch((function(e){console.log("error"),ie=e.response.data,console.log("\u932f\u8aa4\u8cc7\u8a0a\u5982\u4e0b: "+ie.error);var t="\u932f\u8aa4\u8cc7\u8a0a: "+ie.error;oe(t)})).finally((function(){console.log(ie)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se={email:localStorage.getItem("email")},ue=function(){var e=Object(n.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(""),console.log(se),e.next=4,y.post("api/password/forget",se).then((function(e){console.log("\u91cd\u65b0\u5bc4\u9001\u6210\u529f!"),re("\u91cd\u65b0\u5bc4\u9001\u6210\u529f!"),ie=e.data})).catch((function(e){console.log("\u91cd\u65b0\u5bc4\u9001\u5931\u6557!");var t="\u91cd\u65b0\u5bc4\u9001\u5931\u6557: "+ie.error;oe(t),ie=e.response.data})).finally((function(){console.log(ie)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:t.container,children:[Object(O.jsx)(g.a,{style:{margin:"84px auto 30px",width:"123px",height:"36px",fontSize:"24px",fontWeight:"900"},children:"\u8f38\u5165\u9a57\u8b49\u78bc"}),Object(O.jsx)(g.a,{style:{margin:"16px auto 0px",height:"10px",fontSize:"15px",fontWeight:"500",color:"#232323"},children:"\u5df2\u628a\u9a57\u8b49\u78bc\u767c\u81f3\u60a8\u7684\u4fe1\u7bb1\uff1a"}),Object(O.jsx)("br",{}),Object(O.jsx)(g.a,{style:{margin:"0px auto 0px",height:"10px",fontSize:"15px",fontWeight:"700",color:"#232323"},children:localStorage.getItem("email")}),Object(O.jsx)("br",{}),Object(O.jsx)(g.a,{style:{margin:"0px auto 0px",height:"10px",fontSize:"15px",fontWeight:"500",color:"#232323"},children:"\u8acb\u78ba\u8a8d\u60a8\u7684\u4fe1\u7bb1\u53ca\u8f38\u51654\u4f4d\u6578\u9a57\u8b49\u78bc\u3002"}),Object(O.jsx)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:Object(O.jsxs)(f.a,{theme:v,children:[Object(O.jsx)(p.a,{autoFocus:!0,className:t.textField,id:"code_one",inputRef:x,value:u.code_one,onChange:q,onKeyDown:A}),Object(O.jsx)(p.a,{className:t.textField,id:"code_two",inputRef:b,value:u.code_two,onChange:q,onKeyDown:A}),Object(O.jsx)(p.a,{className:t.textField,id:"code_three",inputRef:w,value:u.code_three,onChange:q,onKeyDown:A}),Object(O.jsx)(p.a,{className:t.textField,id:"code_four",inputRef:C,value:u.code_four,onChange:q,onKeyDown:A,sytyle:{position:"relative",zIndex:"-10"}})]})}),Object(O.jsxs)(g.a,{style:{margin:"16px auto 0 ",color:"#ff3b30"},children:[te," "]}),Object(O.jsxs)(g.a,{style:{margin:"0 auto 0 ",color:"#000000"},children:[ae," "]}),Object(O.jsx)(h.a,{disabled:u.submitted,onClick:X,variant:"contained",style:{backgroundColor:"#00d04c",color:"#ffffff",fontWeight:"700",borderColor:"#00d04c",width:"92%",maxWidth:"379px",Height:"48px",margin:"27px auto 0",borderRadius:"4px"},children:"\u7e7c\u7e8c"}),Object(O.jsx)(h.a,{variant:"outlined",onClick:ue,style:{color:"#00d04c",fontWeight:"700",borderColor:"#00d04c",width:"92%",maxWidth:"379px",Height:"48px",margin:"24px auto 0"},children:"\u91cd\u65b0\u767c\u9001\u9a57\u8b49\u78bc"})]})}}}]);
//# sourceMappingURL=37.b4d133c7.chunk.js.map