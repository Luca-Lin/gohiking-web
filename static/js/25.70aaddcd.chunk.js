(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[25],{1030:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return J}));var c=a(39),n=a(15),s=a(24),i=a.n(s),r=a(0),o=a(197),l=a(114),m=a(736),d=a(86),j=a(251),u=a(762),b=a(106),h=a(814),g=a.n(h),p=a(815),x=a.n(p),O=a(346),f=a(726),v=a(87),N=a(26),y=a(3),S=Object(o.a)((function(e){return{root:{fontFamily:"NotoSansCJKtc",flexGrow:1,width:"100%"},tangle:{width:"100%",height:"8px",backgroundColor:"rgba(0, 0, 0, 0.05)"},comment:{fontWeight:500,fontSize:"14px",paddingLeft:"3%",paddingRight:"2%"},commentName:{fontWeight:"bold",fontSize:"14px",paddingTop:"4%",paddingBottom:"4%"},rating:{paddingBottom:"5%"},commentButton:{position:"absolute",right:10,paddingBottom:3,textAlign:"center",fontSize:"12px",backgroundColor:"rgba(0, 208, 76, 0.1)"},thumbup:{paddingRight:"10%"},icon:{color:"#3c5754"},thumbupText:{fontSize:"14px",marginLeft:5},gridList:{},magetty:{padding:"2%",width:"88px",height:"88px"},time:{color:"#979797",fontSize:"12px"},number:{paddingLeft:"30%"}}})),k=Object(l.b)({palette:{type:"light",primary:{main:"#00d04c"}}});function w(e){var t=Object(N.k)(),a=S(),c=e.data,s=Object(r.useState)(c.like),i=Object(n.a)(s,2),o=i[0],l=i[1],h=Object(r.useState)(c.dislike),p=Object(n.a)(h,2),w=p[0],I=p[1],z=Object(r.useState)(c.likestatus),C=Object(n.a)(z,2),_=C[0],B=C[1],L=Object(r.useState)(c.dislikestatus),P=Object(n.a)(L,2),T=P[0],F=P[1];return Object(y.jsx)(m.a,{theme:k,children:Object(y.jsxs)(b.a,{className:a.comment,children:[Object(y.jsx)(b.a,{className:a.commentName,children:c.user.name}),Object(y.jsx)(u.a,{className:a.rating,value:c.star,readOnly:!0}),Object(y.jsxs)(O.a,{className:a.commentButton,variant:"outlined",color:"primary",children:[1==c.difficulty&&"\u7591?\u6709\u5c71\u55ce?",2==c.difficulty&&"\u89ba\u5f97\u8f15\u9b06",3==c.difficulty&&"\u89ba\u5f97\u9084\u597d",4==c.difficulty&&"\u6709\u9ede\u5152\u7d2f",5==c.difficulty&&"\u6839\u672c\u81ea\u8650\u5427"]}),Object(y.jsx)(b.a,{children:c.content}),Object(y.jsxs)(b.a,{item:!0,xs:12,sm:6,children:[Object(y.jsxs)(j.a,{className:a.thumbup,children:[Object(y.jsx)(f.a,{checked:_,onChange:function(){!function(e){var a=0;localStorage.getItem("userId")?a=localStorage.getItem("userId"):t.push({pathname:"/signin"}),B((function(e){return!e})),l(_?o-1:o+1),T&&(F(!1),I(w-1)),v.a.post("/api/likeComment/?user_id="+a+"&comment_id="+e+"&status=1").then((function(e){console.log(e.status)}))}(c.id)},icon:Object(y.jsx)(g.a,{}),checkedIcon:Object(y.jsx)(g.a,{style:{color:"#3c5754"}})}),Object(y.jsx)(d.a,{className:a.thumbupText,children:o})]}),Object(y.jsxs)(j.a,{className:a.thumbup,children:[Object(y.jsx)(f.a,{checked:T,onChange:function(){!function(e){var a=0;localStorage.getItem("userId")?a=localStorage.getItem("userId"):(alert("\u8acb\u5148\u767b\u5165"),t.push({pathname:"/signin"})),F((function(e){return!e})),I(T?w-1:w+1),_&&(B(!1),l(o-1)),v.a.post("/api/likeComment/?user_id="+a+"&comment_id="+e+"&status="+-1).then((function(e){console.log(e.status)}))}(c.id)},icon:Object(y.jsx)(x.a,{}),checkedIcon:Object(y.jsx)(x.a,{style:{color:"#3c5754"}})}),Object(y.jsx)(d.a,{className:a.thumbupText,children:w})]})]}),Object(y.jsx)(b.a,{className:a.gridList,children:c.comments_images.map((function(e){return Object(y.jsx)("img",{src:e.s3_url,className:a.magetty})}))}),Object(y.jsxs)(d.a,{className:a.time,children:[c.date,". \u4f86\u56de\u6642\u9593: ",Math.round(c.duration/60),"h"," ",c.duration%60,"m"]}),Object(y.jsx)("hr",{})]})})}!function(){var e=localStorage.getItem("expireTime");console.log(e),e&&((new Date).getTime()>e?(localStorage.removeItem("token"),localStorage.removeItem("expireTime"),localStorage.removeItem("userId"),console.log("remove")):(console.log("token"),localStorage.getItem("token")))}();var I=a(6),z=a(748),C=a(359),_=a(362),B=a(95),L=a.n(B),P=a(250),T=a(724),F=Object(I.a)((function(e){return{root:{height:10,borderRadius:5,width:"60%"},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar:{borderRadius:5,backgroundColor:"#fec15d"}}}))(z.a),M=Object(o.a)((function(e){return{root:{fontFamily:"NotoSansCJKtc",flexGrow:1,width:"100%"},tangle:{width:"100%",height:"8px",backgroundColor:"rgba(0, 0, 0, 0.05)"},rating:{position:"absolute",right:"3%"},number:{fontWeight:"bold",fontFamily:"Roboto",fontSize:"14px"},fraction:{fontSize:"64px"},text:{fontFamily:"Roboto",textAlign:"center",color:"rgba(0, 0, 0, 0.38)"},gridList:{},magetty:{padding:"2%",width:"88px",height:"88px"},time:{fontSize:"12px"},progress:{marginLeft:"4%",marginBottom:"1%"}}})),R=Object(l.b)({palette:{type:"light",primary:{main:"#3c5754"}}});function J(e){var t=M(),a=Object(r.useState)([]),s=Object(n.a)(a,2),o=s[0],l=s[1],h=Object(r.useState)([]),g=Object(n.a)(h,2),p=g[0],x=g[1],O=Object(N.k)(),f=Object(r.useState)([]),S=Object(n.a)(f,2),k=S[0],I=S[1],z=e.location.state.trail_id;console.log(z);var B=localStorage.getItem("userId"),J=function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/comment/"+z+"?uuid="+B).then((function(e){x(e.data),l(e.data.stars),I(e.data.comments)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){J(B)}),[B]);var E,V=p.avgStar;E=V,V=Number.parseFloat(E).toFixed(1);return Math.ceil(V),p.avgStar?Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:t.root,children:[Object(y.jsx)(m.a,{theme:R,children:Object(y.jsx)(C.a,{position:"static",children:Object(y.jsxs)(_.a,{children:[Object(y.jsx)(j.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){O.push({pathname:"/pathway",state:{trail_id:z}})},children:Object(y.jsx)(L.a,{style:{color:"white"}})}),Object(y.jsx)(d.a,{variant:"h6",className:t.title,children:"\u6b65\u9053\u8a55\u8ad6\u8207\u8a0e\u8ad6"})]})})}),Object(y.jsx)(b.a,{className:t.tangle}),Object(y.jsxs)(b.a,{className:t.progress,children:[Object(y.jsxs)(b.a,{className:t.rating,children:[Object(y.jsxs)(b.a,{className:t.fraction,children:[V," "]}),Object(y.jsx)(u.a,{name:"size-small",precision:.1,value:V,readOnly:!0,size:"small"}),Object(y.jsxs)(b.a,{className:t.text,children:[" (",p.totalPeople,")"]})]}),Object(y.jsxs)(P.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(y.jsxs)(T.a,{children:[Object(y.jsx)(m.a,{className:t.number,children:"5 "}),Object(y.jsx)(F,{className:t.progress,variant:"determinate",value:100*o.five/p.totalPeople})]}),Object(y.jsxs)(T.a,{children:[Object(y.jsx)(m.a,{className:t.number,children:"4"}),Object(y.jsx)(F,{variant:"determinate",value:100*o.four/p.totalPeople,className:t.progress})]}),Object(y.jsxs)(T.a,{children:[Object(y.jsx)(m.a,{className:t.number,children:" 3"}),Object(y.jsx)(F,{variant:"determinate",value:100*o.three/p.totalPeople,className:t.progress})]}),Object(y.jsxs)(T.a,{children:[Object(y.jsx)(m.a,{className:t.number,children:"2"}),Object(y.jsx)(F,{variant:"determinate",value:100*o.two/p.totalPeople,className:t.progress})]}),Object(y.jsxs)(T.a,{children:[Object(y.jsx)(m.a,{className:t.number,children:"1"}),Object(y.jsx)(F,{variant:"determinate",value:100*o.one/p.totalPeople,className:t.progress})]})]})]}),Object(y.jsx)(b.a,{className:t.tangle}),k.map((function(e){return Object(y.jsx)(w,{data:e})}))]})}):Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:t.root,children:[Object(y.jsx)(m.a,{theme:R,children:Object(y.jsx)(C.a,{position:"static",children:Object(y.jsxs)(_.a,{children:[Object(y.jsx)(j.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){O.goBack({state:{trail_id:z}})},children:Object(y.jsx)(L.a,{style:{color:"white"}})}),Object(y.jsx)(d.a,{variant:"h6",className:t.title,children:"\u6b65\u9053\u8a55\u8ad6\u8207\u8a0e\u8ad6"})]})})}),Object(y.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:Object(y.jsx)("h1",{children:"\u67e5\u7121\u6b64\u8a55\u8ad6"})})]})})}},814:function(e,t,a){"use strict";var c=a(69),n=a(70);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(0)),i=(0,c(a(71)).default)(s.createElement("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"}),"ThumbUp");t.default=i},815:function(e,t,a){"use strict";var c=a(69),n=a(70);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(0)),i=(0,c(a(71)).default)(s.createElement("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"}),"ThumbDown");t.default=i}}]);
//# sourceMappingURL=25.70aaddcd.chunk.js.map