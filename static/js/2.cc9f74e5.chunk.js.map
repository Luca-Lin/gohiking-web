{"version":3,"sources":["asset/img/sample.jpg","asset/img/google-icon.svg","pages/HikingFrontend/SignIn.js"],"names":["useState","React","useRef","useLayoutEffect","firebase","apps","length","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","useStyles","makeStyles","theme","container","display","flexDirection","width","height","root","maxheight","margin","padding","overflowX","objectFit","google","facebook","backgroundColor","letterSpacing","color","marginBottom","newFacebook","borderRadius","background","border","fontSize","justifyContent","shadowRadius","ColorButton1","withStyles","fontWeight","Button","ColorButton2","ColorButton3","ColorButton4","testTheme","createTheme","palette","primary","main","contrastText","previous_pathname","localStorage","getItem","ImgMediaCard","classes","socialData","setSocialData","history","useHistory","signInWithSocialChangePage","a","console","log","axios","post","then","response3","data","token","setItem","userId","now","Date","getTime","expireTime","push","pathname","catch","error","firstUpdate","current","className","style","overflow","src","bg","alt","variant","onClick","provider","auth","GoogleAuthProvider","useDeviceLanguage","signInWithPopup","result","credential","accessToken","user","additionalUserInfo","profile","email","name","id","picture","idToken","code","message","startIcon","googleIcon","weight","FacebookAuthProvider","url","OAuthProvider","addScope","s","providerData","counter","split","forEach","character","uid","ThemeProvider","Typography","component","direction","textAlign","to","RouterLink","borderColor","marginTop"],"mappings":"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","file":"static/js/2.cc9f74e5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/sample.c5c1fd6a.jpg\";","export default __webpack_public_path__ + \"static/media/google-icon.a45b46e9.svg\";","import React from \"react\";\r\nimport { createTheme , withStyles, makeStyles, ThemeProvider } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FacebookIcon from '@material-ui/icons/Facebook';\r\nimport AppleIcon from '@material-ui/icons/Apple';\r\nimport MailOutlineIcon from '@material-ui/icons/MailOutline';\r\nimport { Link as RouterLink} from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport bg from '../../asset/img/sample.jpg';\r\nimport GoogleLogin from \"react-google-login\";\r\nimport FacebookLogin from 'react-facebook-login';\r\nimport axios from \"axios\";\r\nimport googleIcon from '.../../asset/img/google-icon.svg'\r\n\r\nimport firebase from 'firebase/app';\r\nimport \"firebase/analytics\";\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\n// import {useAuthState} from 'react-firebase-hooks/auth';\r\n// import {useCollectionData} from 'react-firebase-hooks/firestore';\r\n\r\nconst { useState, useRef, useLayoutEffect } = React; //#####\r\n<script src=\"https://www.gstatic.com/firebasejs/5.9.1/firebase-auth.js\"></script>\r\n\r\nif (!firebase.apps.length) {\r\n  firebase.initializeApp({\r\n    apiKey: \"AIzaSyAZECXAG-TWAR9_AOlKExuq2tJ-8tWVfA4\",\r\n    authDomain: \"go-hiking-test.firebaseapp.com\",\r\n    databaseURL: \"https://go-hiking-test-default-rtdb.europe-west1.firebasedatabase.app\",\r\n    projectId: \"go-hiking-test\",\r\n    storageBucket: \"go-hiking-test.appspot.com\",\r\n    messagingSenderId: \"1009464473437\",\r\n    appId: \"1:1009464473437:web:b6283b9c93964195409ab4\",\r\n    measurementId: \"G-DLB3B3L50D\"\r\n  });\r\n}else {\r\n  firebase.app(); // if already initialized, use that one\r\n}\r\n\r\n// const auth = firebase.auth();\r\n// const firestore = firebase.firestore();\r\n\r\nconst useStyles = makeStyles((theme)=> ({\r\n  container: {\r\n    display:'flex',\r\n    flexDirection: 'column',  // flexDirection:'column' 使button strech 開來\r\n    // width:'411px',\r\n    width: '100%',\r\n    // height: '736px',\r\n    height: '100%',\r\n  },\r\n  root:{\r\n    maxheight: '600',\r\n    width: '100%',\r\n    margin: '0',\r\n    padding: '0',\r\n    overflowX: 'hidden',\r\n    objectFit: 'cover',\r\n  },\r\n  google:{\r\n    margin: 'auto', \r\n  },\r\n  facebook:{\r\n    // root:{\r\n    //   backgroundColor: \"#4267b2\",\r\n    // },\r\n    display: 'flex',\r\n    backgroundColor: \"#4267b2\",\r\n    letterSpacing: 2,\r\n    color: \"#ffffff\",\r\n    width: '92%',\r\n    height: '44px',\r\n    marginBottom: '16px',\r\n    margin: 'auto', \r\n    \r\n  },\r\n  newFacebook:{\r\n    width: '92%',\r\n    height: '44px',  \r\n    borderRadius: '4px',\r\n    background: '#4267b2',\r\n    color: '#ffffff',\r\n    border: '0px transparent',\r\n    letterSpacing: 2,  \r\n    marginBottom: '16px',\r\n    margin: 'auto', \r\n    display: 'flex',\r\n    fontSize: '13.5px',\r\n    padding: '13px 0px 0px',\r\n    justifyContent: 'center',\r\n    shadowRadius: '15',\r\n  }\r\n}));\r\n\r\nconst ColorButton1 = withStyles(() => ({\r\n  root: {\r\n    display: 'flex',\r\n    backgroundColor: \"#ffffff\",\r\n    letterSpacing: 1.6,\r\n    color: \"#000000\",\r\n    width: '92%',\r\n    height: '44px',\r\n    marginBottom: '16px',\r\n    margin: 'auto', \r\n    fontWeight: '500',  \r\n  },\r\n}))(Button);\r\n\r\nconst ColorButton2 = withStyles(() => ({\r\n  root: {\r\n    display: 'flex',\r\n    backgroundColor: \"#4267b2\",\r\n    letterSpacing: 2,\r\n    color: \"#ffffff\",\r\n    width: '92%',\r\n    height: '44px',\r\n    marginBottom: '16px',\r\n    margin: 'auto',  \r\n    \r\n  },\r\n}))(Button);\r\n\r\nconst ColorButton3 = withStyles(() => ({\r\n  root: {\r\n    display: 'flex',\r\n    backgroundColor: \"#000000\",\r\n    letterSpacing: 2,\r\n    color: \"#ffffff\",    \r\n    width: '92%',\r\n    height: '44px',\r\n    marginBottom: '16px',\r\n    margin: 'auto',     \r\n  },\r\n}))(Button);\r\n\r\nconst ColorButton4 = withStyles(() => ({\r\n  root: {\r\n    display: 'flex',\r\n    backgroundColor: \"#ffffff\",\r\n    letterSpacing: 1.6,\r\n    color: \"#000000\",\r\n    width: '92%',\r\n    height: '44px',\r\n    margin: 'auto', \r\n    fontWeight: '500',  \r\n  },\r\n}))(Button);\r\n\r\nconst testTheme = createTheme ({\r\n  palette: {\r\n    primary:{\r\n      main: '#b000ff',\r\n      contrastText: '#ffffff',\r\n    }\r\n  }\r\n});\r\n\r\nconst previous_pathname = localStorage.getItem('previous_pathname');\r\n\r\nexport default function ImgMediaCard() {\r\n  const classes = useStyles();\r\n  const [socialData, setSocialData] = useState({}); // #####\r\n  let history = useHistory();\r\n  function GoToLogin1_1() {\r\n    history.push(\"/login1\");\r\n  }\r\n// Google第三方登入\r\n  const responseGoogle = async(response) => {\r\n    console.log('response: ', response);\r\n    var data = {\r\n      'email': response.profileObj.email,\r\n      'name': response.profileObj.name,\r\n      'google_id': response.profileObj.googleId,\r\n      'avatar': response.profileObj.imageUrl,\r\n      'token': response.tokenId,\r\n    }\r\n    console.log('data: ', data);\r\n    await axios.post('https://staging-server.gohiking.app/api/auth/social/callback', data).then(function(response1){\r\n      console.log('====second response==== ',response1);\r\n      console.log('====second response token==== ', response1.data.token);\r\n      localStorage.setItem('token', response1.data.token);\r\n      localStorage.setItem('userId',response1.data.userId);\r\n      const now = new Date()\r\n      localStorage.setItem('expireTime', now.getTime() + response1.data.expireTime)\r\n      if(previous_pathname == null) {\r\n        history.push('/home');\r\n      } else {\r\n        history.push({ pathname: previous_pathname });\r\n      }\r\n    })\r\n    .catch(function (error) {\r\n      console.log('====error==== ', error);\r\n      \r\n    })\r\n  };\r\n// Google Firebase\r\nconst signInWithGoogle = () =>{\r\n  var provider = new firebase.auth.GoogleAuthProvider();\r\n  firebase.auth().useDeviceLanguage();\r\n\r\n  firebase.auth()\r\n  .signInWithPopup(provider)\r\n  .then((result) => {\r\n    /** @type {firebase.auth.OAuthCredential} */\r\n    console.log('******resul******', result);\r\n    var credential = result.credential;\r\n\r\n    // This gives you a Google Access Token. You can use it to access the Google API.\r\n    var token = credential.accessToken;\r\n    // The signed-in user info.\r\n    var user = result.user;\r\n    var data = {\r\n      'email': result.additionalUserInfo.profile.email,\r\n      'name': result.additionalUserInfo.profile.name,\r\n      'google_id': result.additionalUserInfo.profile.id,\r\n      'avatar': result.additionalUserInfo.profile.picture,\r\n      'token': result.credential.idToken,\r\n    }\r\n    console.log('====data====',data);\r\n    setSocialData(data);\r\n  }).catch((error) => {\r\n    // Handle Errors here.\r\n    var errorCode = error.code;\r\n    var errorMessage = error.message;\r\n  });\r\n}\r\n\r\n\r\n\r\n\r\n// Facebook 第三方登入\r\n  const responseFacebook = async(response) => {\r\n    console.log('====response===== ',response)\r\n    var data = {\r\n      'email': response.email,\r\n      'name': response.name,\r\n      'facebook_id': response.id,\r\n      'avatar': response.picture.data.url,\r\n      'token': response.accessToken,\r\n    }\r\n    console.log('====data====',data);\r\n    await axios.post('https://staging-server.gohiking.app/api/auth/social/callback', data).then(function(response2){\r\n      console.log('====second response==== ', response2);\r\n      console.log('====second response token==== ', response2.data.token);\r\n      localStorage.setItem('token', response2.data.token);\r\n      localStorage.setItem('userId',response2.data.userId);\r\n      const now = new Date()\r\n      localStorage.setItem('expireTime', now.getTime() + response2.data.expireTime)\r\n      if(previous_pathname == null) {\r\n        history.push('/home');\r\n      } else {\r\n        history.push({ pathname: previous_pathname });\r\n      }\r\n    })\r\n    .catch(function (error){\r\n      console.log('====error==== ',error);\r\n    })\r\n  }\r\n\r\n  const componentClicked =()=>console.log(\"clicked!\")\r\n\r\n\r\n// Facebook Firebase\r\nconst signInWithFacebook = () =>{\r\n  const provider = new firebase.auth.FacebookAuthProvider();\r\n  console.log('facebook firebase start');\r\n  firebase.auth().useDeviceLanguage();\r\n  firebase\r\n  .auth()\r\n  .signInWithPopup(provider)\r\n  .then((result) => {\r\n    /** @type {firebase.auth.OAuthCredential} */\r\n    console.log('#######################');\r\n    console.log('====result==== ',result);\r\n    var data = {\r\n      'email': result.additionalUserInfo.profile.email,\r\n      'name': result.additionalUserInfo.profile.name,\r\n      'facebook_id': result.additionalUserInfo.profile.id,\r\n      'avatar': result.additionalUserInfo.profile.picture.data.url,\r\n      'token': result.credential.accessToken,\r\n    }\r\n    console.log('====data====',data);\r\n    setSocialData(data);\r\n  })\r\n  .catch((error) => {\r\n    // Handle Errors here.\r\n    var errorCode = error.code;\r\n    var errorMessage = error.message;\r\n  });\r\n  console.log('facebook firebase end');\r\n}\r\n\r\n// Apple第三方登入\r\n\r\n  const signInWithApple = () =>{\r\n      var data_apple ={}; // #####\r\n      const provider = new firebase.auth.OAuthProvider('apple.com');\r\n      provider.addScope('email')\r\n      provider.addScope('name')\r\n      firebase.auth().useDeviceLanguage();\r\n      firebase\r\n        .auth()\r\n        .signInWithPopup(provider)\r\n        .then((result) => {\r\n          console.log('====result is like this==== ',result);\r\n          /** @type {firebase.auth.OAuthCredential} */\r\n          //準備data的name\r\n          var s = result.user.providerData[0].email;\r\n          var name ='';\r\n          var counter = false;\r\n          s.split(\"\").forEach(character => {\r\n            if(character === '@' || counter === true){\r\n              counter = true;\r\n            }else{\r\n              name = name + character;\r\n            }\r\n            })\r\n          // 準備data\r\n          var data = {\r\n            'email':result.user.providerData[0].email,\r\n            'name': name,\r\n            'apple_id': result.user.uid,\r\n            'avatar': 'https://imgur.com/gallery/TX5W1uj',\r\n            'token': result.credential.idToken,\r\n          }\r\n          console.log('====data====',data);\r\n          setSocialData(data);\r\n        })\r\n        .catch((error) => {\r\n          // Handle Errors here.\r\n          console.log('error message:  ', error.message);\r\n        });\r\n        // var headers = {\"Access-Control-Allow-Origin\": \"https://staging-server.gohiking.app:443\"} //#####\r\n    }\r\n\r\n    const signInWithSocialChangePage = async() =>{ //#####\r\n      console.log('========final data_apple===========', socialData);\r\n      await axios.post('https://staging-server.gohiking.app/api/auth/social/callback', socialData).then(function(response3){\r\n          console.log(\"====post success====\",response3);\r\n          console.log('====second response token====', response3.data.token);\r\n          localStorage.setItem('token', response3.data.token);\r\n          localStorage.setItem('userId',response3.data.userId);\r\n          const now = new Date()\r\n          localStorage.setItem('expireTime', now.getTime() + response3.data.expireTime)\r\n          if(previous_pathname == null) {\r\n            history.push('/home');\r\n          } else {\r\n            history.push({ pathname: previous_pathname });\r\n          }\r\n        })\r\n        .catch(function (error){\r\n          console.log('error: ', error);\r\n        })\r\n    }\r\n\r\n    const firstUpdate = useRef(true); //#####\r\n    useLayoutEffect(() => {\r\n      if (firstUpdate.current) {\r\n        firstUpdate.current = false;\r\n        return;\r\n      }\r\n      signInWithSocialChangePage();\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[socialData]);\r\n\r\n  return (   \r\n         \r\n      <div className= {classes.container} style={{objectFit: \"cover\"}}>\r\n        <div style={{\r\n          width: '100vw',\r\n          height: 381,\r\n          overflow: 'hidden',\r\n        }}>\r\n          <img src={bg} alt={'bg'} style={{\r\n            height: '100%',\r\n            width: '100%',\r\n            objectFit: 'cover',\r\n          }} />\r\n        </div>\r\n        <div style={{margin: \"16.5px 16px 0px\",}}>\r\n          {/* <GoogleLogin\r\n            clientId=\"184500302467-kn257cjsh71fconchpf7dmd52qmdvkkg.apps.googleusercontent.com\"\r\n            render={renderProps => (\r\n              <ColorButton1 className = {classes.google} onClick={renderProps.onClick} disabled={renderProps.disabled} variant = \"contained\" startIcon={<img src = {googleIcon} alt = 'google_icon' style={{height: '18px', weight: '18px'}}/>}>透過Google登入</ColorButton1>\r\n            )}\r\n            buttonText=\"使用 Google 登入\"\r\n            onSuccess={responseGoogle}\r\n            onFailure={responseGoogle}\r\n            cookiePolicy={\"single_host_origin\"}\r\n          /> */}\r\n          <ColorButton1 variant = \"contained\" onClick = {signInWithGoogle} startIcon={<img src = {googleIcon} alt = 'google_icon' style={{height: '18px', weight: '18px'}}/>}>\r\n            透過Google登入\r\n          </ColorButton1>\r\n          {/* <FacebookLogin\r\n            appId=\"1311202525878900\"\r\n            autoLoad={false}\r\n            onClick={componentClicked}\r\n            callback={responseFacebook}\r\n            fields=\"name,email,picture\"\r\n            cssClass = {classes.newFacebook}\r\n            textButton= \"透過FACEBOOK登入\"\r\n            icon = {<FacebookIcon style={{color: \"#ffffff\", marginRight: \"5px\",fontSize : \"24px\", paddingBottom: \"4px\"}}/>}\r\n            />           */}\r\n          <ColorButton2 variant = \"contained\" onClick = {signInWithFacebook} startIcon={<FacebookIcon style={{color: \"#ffffff\"}}/>}>\r\n            透過FACEBOOK登入\r\n          </ColorButton2>  \r\n          <ColorButton3 variant = \"contained\" onClick = {signInWithApple} startIcon={<AppleIcon style={{color: \"#ffffff\"}}/>}>\r\n            透過Apple ID登入\r\n          </ColorButton3>\r\n          <ColorButton4 variant = \"contained\" onClick = {GoToLogin1_1} startIcon={<MailOutlineIcon style={{color: \"#000000\"}}/>}>\r\n            透過Mail登入\r\n          </ColorButton4>\r\n        </div>\r\n          <ThemeProvider theme = {testTheme}>\r\n            <div style={{margin: \"24px 0px 0px 0px\"}}></div>\r\n          </ThemeProvider>\r\n          <Typography variant=\"body2\" component=\"p\" style={{color: \"black\", direction: \"column\", textAlign: \"center\"}}>\r\n            還不是會員嗎? <RouterLink to=\"/signup\" style={{color: '#000000'}}>註冊新帳號</RouterLink>\r\n          </Typography>\r\n          <Button variant = \"outlined\" component={RouterLink} to=\"/home\" style={{color: \"#00d04c\", fontWeight:\"700\" , borderColor: \"#00d04c\", width:\"182px\", height: \"40px\", margin: \"auto\",marginTop: '16px' }}>\r\n            直接使用\r\n          </Button>\r\n          \r\n      </div>\r\n  );\r\n}"],"sourceRoot":""}